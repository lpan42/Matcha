import*as e from"react";import{createContext as r,useContext as t,createElement as n,useState as s,useRef as c,useEffect as u,isValidElement as i,cloneElement as a,Fragment as o}from"react";var l=e=>void 0===e,f=e=>null===e||l(e),d=e=>Array.isArray(e);const m=e=>"object"==typeof e;var g=e=>!f(e)&&!d(e)&&m(e),h=e=>g(e)&&e.nodeType===Node.ELEMENT_NODE;const v={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit"},b="undefined",p={BLUR:"blur",CHANGE:"change",INPUT:"input"},O="max",y="min",j="maxLength",w="minLength",S="pattern",x="required",E="validate",R=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,V=/^\w*$/,B=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,N=/\\(\\)?/g;var F=e=>!d(e)&&(V.test(e)||!R.test(e));const C=e=>{const r=[];return e.replace(B,(e,t,n,s)=>{r.push(n?s.replace(N,"$1"):t||e)}),r};function L(e,r,t){let n=-1;const s=F(r)?[r]:C(r),c=s.length,u=c-1;for(;++n<c;){const r=s[n];let c=t;if(n!==u){const t=e[r];c=g(t)||d(t)?t:isNaN(s[n+1])?{}:[]}e[r]=c,e=e[r]}return e}var k=e=>Object.entries(e).reduce((e,[r,t])=>F(r)?Object.assign(Object.assign({},e),{[r]:t}):(L(e,r,t),e),{}),A=(e,r,t)=>{const n=r.split(/[,[\].]+?/).filter(Boolean).reduce((e,r)=>f(e)?e:e[r],e);return l(n)||n===e?e[r]||t:n},P=(e,r)=>{for(const t in e)if(A(r,t)){const r=e[t];if(r){if(h(r.ref)&&r.ref.focus){r.ref.focus();break}if(r.options){r.options[0].ref.focus();break}}}},M=(e,r)=>{h(e)&&e.removeEventListener&&(e.removeEventListener(p.INPUT,r),e.removeEventListener(p.CHANGE,r),e.removeEventListener(p.BLUR,r))},D=e=>!!e&&"radio"===e.type,W=e=>!!e&&"checkbox"===e.type;function $(e){return!e||e instanceof HTMLElement&&e.nodeType!==Node.DOCUMENT_NODE&&$(e.parentNode)}const T={isValid:!1,value:""};var U=e=>d(e)?e.reduce((e,{ref:{checked:r,value:t}})=>r?{isValid:!0,value:t}:e,T):T,I=e=>[...e].filter(({selected:e})=>e).map(({value:e})=>e),z=e=>!!e&&"file"===e.type,H=e=>!!e&&"select-multiple"===e.type,G=e=>""===e;const q={value:!1,isValid:!1},_={value:!0,isValid:!0};var J=e=>{if(d(e)){if(e.length>1){const r=e.filter(({ref:{checked:e}})=>e).map(({ref:{value:e}})=>e);return{value:r,isValid:!!r.length}}const{checked:r,value:t,attributes:n}=e[0].ref;return r?n&&!l(n.value)?l(t)||G(t)?_:{value:t,isValid:!0}:_:q}return q};function K(e,r){const{name:t,value:n}=r,s=e[t];return z(r)?r.files:D(r)?s?U(s.options).value:"":H(r)?I(r.options):W(r)?!!s&&J(s.options).value:n}var Q=e=>"string"==typeof e,X=(e,r)=>{const t={},n=Q(r),s=d(r),c=r&&r.nest;for(const u in e)(l(r)||c||n&&u.startsWith(r)||s&&r.find(e=>u.startsWith(e)))&&(t[u]=K(e,e[u].ref));return t},Y=e=>g(e)&&!Object.keys(e).length,Z=(e,{type:r,types:t,message:n})=>g(e)&&e.type===r&&e.message===n&&((e={},r={})=>Object.entries(e).reduce((e,[t,n])=>!!e&&r[t]&&r[t]===n,!0))(e.types,t);var ee=e=>e instanceof RegExp,re=e=>{const r=g(e)&&!ee(e);return{value:r?e.value:e,message:r?e.message:""}},te=e=>"function"==typeof e,ne=e=>"boolean"==typeof e;function se(e,r,t="validate"){const n=Q(e);if(n||ne(e)&&!e){return{type:t,message:n?e:"",ref:r}}}var ce=(e,r,t,n,s)=>{if(!r)return{};const c=t[e];return Object.assign(Object.assign({},c),{types:Object.assign(Object.assign({},c&&c.types?c.types:{}),{[n]:s||!0})})},ue=async(e,r,{ref:t,ref:{type:n,value:s,name:c},options:u,required:i,maxLength:a,minLength:o,min:l,max:d,pattern:m,validate:h})=>{const v=e.current,b={},p=D(t),R=W(t),V=p||R,B=G(s),N=ce.bind(null,c,r,b),F=(e,n,s,u=j,i=w)=>{const a=e?n:s;if(b[c]=Object.assign({type:e?u:i,message:a,ref:t},N(e?u:i,a)),!r)return b};if(i&&(!p&&!R&&(B||f(s))||ne(s)&&!s||R&&!J(u).isValid||p&&!U(u).isValid)){const{value:e,message:n}=Q(i)?{value:!!i,message:i}:re(i);if(e&&(b[c]=Object.assign({type:x,message:n,ref:V?v[c].options[0].ref:t},N(x,n)),!r))return b}if(!f(l)||!f(d)){let e,c;const{value:u,message:i}=re(d),{value:a,message:o}=re(l);if("number"===n||!n&&!isNaN(s)){const r=t.valueAsNumber||parseFloat(s);f(u)||(e=r>u),f(a)||(c=r<a)}else{const r=t.valueAsDate||new Date(s);Q(u)&&(e=r>new Date(u)),Q(a)&&(c=r<new Date(a))}if((e||c)&&(F(!!e,i,o,O,y),!r))return b}if(Q(s)&&!B&&(a||o)){const{value:e,message:t}=re(a),{value:n,message:c}=re(o),u=s.toString().length,i=a&&u>e,l=o&&u<n;if((i||l)&&(F(!!i,t,c),!r))return b}if(m&&!B){const{value:e,message:n}=re(m);if(ee(e)&&!e.test(s)&&(b[c]=Object.assign({type:S,message:n,ref:t},N(S,n)),!r))return b}if(h){const e=K(v,t),n=V&&u?u[0].ref:t;if(te(h)){const t=se(await h(e),n);if(t&&(b[c]=Object.assign(Object.assign({},t),N(E,t.message)),!r))return b}else if(g(h)){const t=Object.entries(h),s=await new Promise(s=>{t.reduce(async(u,[i,a],o)=>{if(!Y(await u)&&!r||!te(a))return s(u);let l;const f=se(await a(e),n,i);return f?(l=Object.assign(Object.assign({},f),N(i,f.message)),r&&(b[c]=l)):l=u,t.length-1===o?s(l):l},{})});if(!Y(s)&&(b[c]=Object.assign({ref:n},s),!r))return b}}return b};const ie=(e,r)=>d(e.inner)?e.inner.reduce((e,{path:t,message:n,type:s})=>Object.assign(Object.assign({},e),e[t]&&r?{[t]:ce(t,r,e,s,n)}:{[t]:e[t]||Object.assign({message:n,type:s},r?{types:{[s]:n||!0}}:{})}),{}):{[e.path]:{message:e.message,type:e.type}};async function ae(e,r,t,n,s){if(n)return n(t,s);try{return{values:await e.validate(t,{abortEarly:!1,context:s}),errors:{}}}catch(e){return{values:{},errors:k(ie(e,r))}}}var oe=(e,r,t)=>l(e[r])?A(e,r,t):e[r];const le=(e,r)=>{const t=(r,t,n)=>{const s=n?`${e}.${t}`:`${e}[${t}]`;return(e=>f(e)||!m(e))(r)?s:le(s,r)};return d(r)?r.map((e,r)=>t(e,r)):Object.entries(r).map(([e,r])=>t(r,e,!0))};var fe=(e,r)=>(function e(r){return r.reduce((r,t)=>r.concat(d(t)?e(t):t),[])})(le(e,r)),de=(e,r,t,n,s)=>{let c;return t.add(r),Y(e)?c=s||void 0:l(e[r])?(c=A(k(e),r),d(s)&&d(c)&&c.length!==s.length&&(c=s),l(c)||fe(r,c).forEach(e=>t.add(e))):(c=e[r],t.add(r)),l(c)?g(n)?oe(n,r):n:c},me=({hasError:e,isBlurEvent:r,isOnSubmit:t,isReValidateOnSubmit:n,isOnBlur:s,isReValidateOnBlur:c,isSubmitted:u})=>t&&n||t&&!u||s&&!r&&!e||c&&!r&&e||n&&u,ge=(e,r)=>{const t=k(X(e));return r?A(t,r,t):t};function he(e,r){let t=!1;if(!d(e)||!d(r)||e.length!==r.length)return!0;for(let n=0;n<e.length&&!t;n++){const s=e[n],c=r[n];if(l(c)||Object.keys(s).length!==Object.keys(c).length){t=!0;break}for(const e in s)if(s[e]!==c[e]){t=!0;break}}return t}const ve=(e,r)=>e.startsWith(`${r}[`);var be=(e,r)=>[...e].reduce((e,t)=>!!ve(r,t)||e,!1),pe=e=>typeof FileList!==b&&e instanceof FileList;function Oe(e){return d(e)?e:C(e)}function ye(e,r){return 1==r.length?e:function(e,r){const t=F(r)?[r]:Oe(r),n=r.length;let s=0;for(;s<n;)e=l(e)?s++:e[t[s++]];return s==n?e:void 0}(e,function(e,r,t){let n=-1,s=e.length;r<0&&(r=-r>s?0:s+r),(t=t>s?s:t)<0&&(t+=s),s=r>t?0:t-r;const c=Array(s);for(;++n<s;)c[n]=e[n+r];return c}(r,0,-1))}function je(e,r){return r.forEach(r=>{!function(e,r){const t=F(r)?[r]:Oe(r);e=ye(e,t);const n=t[t.length-1];!(null!=e)||delete e[n]}(e,r)}),e}var we=e=>({isOnSubmit:!e||e===v.onSubmit,isOnBlur:e===v.onBlur,isOnChange:e===v.onChange});const{useRef:Se,useState:xe,useCallback:Ee,useEffect:Re}=e;function Ve({mode:e=v.onSubmit,reValidateMode:r=v.onChange,validationSchema:t,validationResolver:n,validationContext:s,defaultValues:c={},submitFocusError:u=!0,validateCriteriaMode:i}={}){const a=Se({}),o="all"===i,m=Se({}),O=Se({}),y=Se({}),j=Se(new Set),w=Se(new Set),S=Se(new Set),x=Se(new Set),E=Se(!0),R=Se({}),V=Se(c),B=Se(!1),N=Se(!1),C=Se(!1),T=Se(!1),U=Se(0),I=Se(!1),q=Se(),_=Se({}),J=Se(new Set),[,ee]=xe(),{isOnBlur:re,isOnSubmit:ne}=Se(we(e)).current,se=typeof window===b,ce=!(!t&&!n),ie=typeof document!==b&&!se&&!l(window.HTMLElement),le=ie&&"Proxy"in window,fe=Se({dirty:!le,dirtyFields:!le,isSubmitted:ne,submitCount:!le,touched:!le,isSubmitting:!le,isValid:!le}),{isOnBlur:ve,isOnSubmit:Oe}=Se(we(r)).current,ye=Ee(()=>{B.current||ee({})},[]),Ve=Ee((e,r,t,n)=>{let s=t||function({errors:e,name:r,error:t,validFields:n,fieldsWithValidation:s}){const c=Y(t),u=Y(e),i=A(t,r),a=A(e,r);return!(c&&n.has(r)||a&&a.isManual)&&(!!(u!==c||!u&&!a||c&&s.has(r)&&!n.has(r))||i&&!Z(a,i))}({errors:m.current,error:r,name:e,validFields:x.current,fieldsWithValidation:S.current});if(Y(r)?((S.current.has(e)||ce)&&(x.current.add(e),s=s||A(m.current,e)),m.current=je(m.current,[e])):(x.current.delete(e),s=s||!A(m.current,e),L(m.current,e,r[e])),s&&!n)return ye(),!0},[ye,ce]),Be=Ee((e,r)=>{const t=a.current[e];if(!t)return!1;const n=t.ref,s=t.options,{type:c}=n,u=ie&&h(n)&&f(r)?"":r;return D(n)&&s?s.forEach(({ref:e})=>e.checked=e.value===u):z(n)?G(u)||pe(u)?n.files=u:n.value=u:H(n)?[...n.options].forEach(e=>e.selected=u.includes(e.value)):W(n)&&s?s.length>1?s.forEach(({ref:e})=>e.checked=u.includes(e.value)):s[0].ref.checked=!!u:n.value=u,!!c},[ie]),Ne=e=>{if(!a.current[e]||!fe.current.dirty&&!fe.current.dirtyFields)return!1;const r=be(J.current,e),t=w.current.size;let n=R.current[e]!==K(a.current,a.current[e].ref);if(r){const r=e.substring(0,e.indexOf("["));n=he(ge(a.current,r),A(V.current,r))}const s=(r?T.current:w.current.has(e))!==n;return n?w.current.add(e):w.current.delete(e),T.current=r?n:!!w.current.size,fe.current.dirty?s:t!==w.current.size},Fe=Ee((e,r)=>{if(Be(e,r),Ne(e)||!A(O.current,e)&&fe.current.touched)return!!L(O.current,e,!0)},[Be]),Ce=Ee(async(e,r)=>{const t=a.current[e];if(!t)return!1;const n=await ue(a,o,t);return Ve(e,n,!1,r),Y(n)},[Ve,o]),Le=Ee(async e=>{const{errors:r}=await ae(t,o,ge(a.current),n,s),c=E.current;return E.current=Y(r),d(e)?(e.forEach(e=>{const t=A(r,e);t?L(m.current,e,t):je(m.current,[e])}),ye()):Ve(e,A(r,e)?{[e]:A(r,e)}:{},c!==E.current),Y(m.current)},[ye,Ve,o,s,n,t]),ke=Ee(async e=>{const r=e||Object.keys(a.current);if(ce)return Le(r);if(d(r)){const e=await Promise.all(r.map(async e=>await Ce(e,!0)));return ye(),e.every(Boolean)}return await Ce(r)},[Le,Ce,ye,ce]),Ae=e=>{const r=(e.match(/\w+/)||[])[0];return N.current||j.current.has(e)||j.current.has(r)&&!F(e)&&J.current.has(r)},Pe=Ee((e,r,t)=>{(Fe(e,r)||Ae(e))&&ye(),t&&ke(e)},[ye,Fe,ke]);q.current=q.current?q.current:async({type:e,target:r})=>{const c=r?r.name:"",u=a.current,i=m.current,l=u[c],f=A(i,c);let d;if(!l)return;const g=e===p.BLUR,h=me({hasError:!!f,isBlurEvent:g,isOnSubmit:ne,isReValidateOnSubmit:Oe,isOnBlur:re,isReValidateOnBlur:ve,isSubmitted:C.current}),v=Ne(c);let b=Ae(c)||v;if(g&&!A(O.current,c)&&fe.current.touched&&(L(O.current,c,!0),b=!0),h)return b&&ye();if(ce){const{errors:e}=await ae(t,o,ge(u),n,s),r=E.current;E.current=Y(e),d=A(e,c)?{[c]:A(e,c)}:{},r!==E.current&&(b=!0)}else d=await ue(a,o,l);!Ve(c,d)&&b&&ye()};const Me=Ee((e={})=>{const r=Y(V.current)?X(a.current):V.current;ae(t,o,k(Object.assign(Object.assign({},r),e)),n,s).then(({errors:e})=>{const r=E.current;E.current=Y(e),r!==E.current&&ye()})},[ye,o,s,n]),De=(e,r)=>{!l(q.current)&&e&&function(e,r,t,n){if(!t)return;const{ref:s,ref:{name:c,type:u},mutationWatcher:i}=t;if(!u)return void delete e[c];const a=e[c];if((D(s)||W(s))&&a){const{options:t}=a;d(t)&&t.length?(t.forEach(({ref:e,mutationWatcher:s},c)=>{(e&&$(e)||n)&&(M(e,r),s&&s.disconnect(),t.splice(c,1))}),t&&!t.length&&delete e[c]):delete e[c]}else($(s)||n)&&(M(s,r),i&&i.disconnect(),delete e[c])}(a.current,q.current,e,r)},We=Ee((e,r)=>{if(!e||e&&be(J.current,e.ref.name)&&!r)return;De(e,r);const{name:t}=e.ref;m.current=je(m.current,[t]),O.current=je(O.current,[t]),R.current=je(R.current,[t]),[w,S,x,j].forEach(e=>e.current.delete(t)),(fe.current.isValid||fe.current.touched)&&(ye(),ce&&Me())},[ye,ce,Me]);const $e=({name:e,type:r,types:t,message:n,preventRender:s})=>{const c=a.current[e];Z(m.current[e],{type:r,message:n,types:t})||(L(m.current,e,{type:r,types:t,message:n,ref:c?c.ref:{},isManual:!0}),s||ye())};function Te(e){Y(a.current)||(d(e)?e:[e]).forEach(e=>We(a.current[e],!0))}function Ue(e,r={}){if(!e.name)return console.warn("Missing name @",e);const{name:t,type:n,value:s}=e,c=Object.assign({ref:e},r),u=a.current,i=D(e)||W(e);let f,m=u[t],g=!0,v=!1;if(i?m&&d(m.options)&&m.options.find(({ref:e})=>s===e.value):m)return void(u[t]=Object.assign(Object.assign({},m),r));if(n){const s=function(e,r){const t=new MutationObserver(()=>{$(e)&&(t.disconnect(),r())});return t.observe(window.document,{childList:!0,subtree:!0}),t}(e,()=>We(c));m=i?Object.assign({options:[...m&&m.options||[],{ref:e,mutationWatcher:s}],ref:{type:n,name:t}},r):Object.assign(Object.assign({},c),{mutationWatcher:s})}else m=c;if(u[t]=m,Y(V.current)||(f=oe(V.current,t),g=l(f),v=be(J.current,t),g||v||Be(t,f)),ce&&!v&&fe.current.isValid?Me():Y(r)||(S.current.add(t),!ne&&fe.current.isValid&&ue(a,o,m).then(e=>{const r=E.current;Y(e)?x.current.add(t):E.current=!1,r!==E.current&&ye()})),R.current[t]||v&&g||(R.current[t]=g?K(u,m.ref):f),!n)return;!function({field:e,handleChange:r,isRadioOrCheckbox:t}){const{ref:n}=e;h(n)&&n.addEventListener&&r&&(n.addEventListener(t?p.CHANGE:p.INPUT,r),n.addEventListener(p.BLUR,r))}({field:i&&m.options?m.options[m.options.length-1]:m,isRadioOrCheckbox:i,handleChange:q.current})}function Ie(e,r){if(!se)if(Q(e))Ue({name:e},r);else{if(!(g(e)&&"name"in e))return r=>r&&Ue(r,e);Ue(e,r)}}const ze=Ee(e=>async r=>{let c,i;r&&(r.preventDefault(),r.persist());const l=a.current;fe.current.isSubmitting&&(I.current=!0,ye());try{if(ce){i=X(l);const{errors:e,values:r}=await ae(t,o,k(i),n,s);m.current=e,c=e,i=r}else{const{errors:e,values:r}=await Object.values(l).reduce(async(e,r)=>{if(!r)return e;const t=await e,{ref:n,ref:{name:s}}=r;if(!l[s])return Promise.resolve(t);const c=await ue(a,o,r);return c[s]?(L(t.errors,s,c[s]),x.current.delete(s),Promise.resolve(t)):(S.current.has(s)&&x.current.add(s),t.values[s]=K(l,n),Promise.resolve(t))},Promise.resolve({errors:{},values:{}}));c=e,i=r}Y(c)?(m.current={},await e(k(i),r)):(u&&ie&&P(l,c),m.current=c)}finally{C.current=!0,I.current=!1,U.current=U.current+1,ye()}},[ie,ye,ce,u,o,s,n,t]),He=e=>{const r=X(a.current);return e&&e.nest?k(r):r};Re(()=>()=>{B.current=!0,a.current&&Object.values(a.current).forEach(e=>We(e,!0))},[We]),ce||(E.current=x.current.size>=S.current.size&&Y(m.current));const Ge={dirty:T.current,dirtyFields:w.current,isSubmitted:C.current,submitCount:U.current,touched:O.current,isSubmitting:I.current,isValid:ne?C.current&&Y(m.current):E.current};return{watch:function(e,r){const t=l(r)?l(V.current)?{}:V.current:r,n=X(a.current,e),s=j.current;if(le&&(fe.current.dirty=!0),Q(e))return de(n,e,s,t,J.current.has(e)?y.current[e]:void 0);if(d(e))return e.reduce((e,r)=>{let c;return c=Y(a.current)&&g(t)?oe(t,r):de(n,r,s,t),Object.assign(Object.assign({},e),{[r]:c})},{});N.current=!0;const c=!Y(n)&&n||r||V.current;return e&&e.nest?k(c):c},control:Object.assign(Object.assign({register:Ie,unregister:Te,removeFieldEventListener:De,getValues:He,setValue:Pe,triggerValidation:ke},ce?{validateSchemaIsValid:Me}:{}),{formState:Ge,mode:{isOnBlur:re,isOnSubmit:ne},reValidateMode:{isReValidateOnBlur:ve,isReValidateOnSubmit:Oe},errorsRef:m,touchedFieldsRef:O,fieldsRef:a,resetFieldArrayFunctionRef:_,validFieldsRef:x,fieldsWithValidationRef:S,watchFieldArrayRef:y,fieldArrayNamesRef:J,isDirtyRef:T,readFormStateRef:fe,defaultValuesRef:V}),handleSubmit:ze,setValue:Pe,triggerValidation:ke,getValues:Ee(He,[]),reset:Ee(e=>{if(ie)for(const e of Object.values(a.current))if(e&&h(e.ref)&&e.ref.closest)try{e.ref.closest("form").reset();break}catch(e){}e&&(V.current=e),Object.values(_.current).forEach(e=>te(e)&&e()),m.current={},a.current={},O.current={},x.current=new Set,S.current=new Set,R.current={},j.current=new Set,w.current=new Set,N.current=!1,C.current=!1,T.current=!1,E.current=!0,U.current=0,ye()},[]),register:Ee(Ie,[V.current,R.current]),unregister:Ee(Te,[]),clearError:Ee(function(e){l(e)?m.current={}:je(m.current,d(e)?e:[e]),ye()},[]),setError:Ee(function(e,r="",t){Q(e)?$e(Object.assign({name:e},g(r)?{types:r,type:""}:{type:r,message:t})):d(e)&&(e.forEach(e=>$e(Object.assign(Object.assign({},e),{preventRender:!0}))),ye())},[]),errors:m.current,formState:le?new Proxy(Ge,{get:(e,r)=>r in e?(fe.current[r]=!0,e[r]):{}}):Ge}}function Be(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(t[n[s]]=e[n[s]])}return t}const Ne=r(null);function Fe(){const e=t(Ne);if(!l(e))return e;throw new Error("Missing FormContext")}function Ce(e){var{children:r,formState:t,errors:s}=e,c=Be(e,["children","formState","errors"]);return n(Ne.Provider,{value:Object.assign(Object.assign({},c),{formState:t,errors:s})},r)}var Le=()=>{const e=typeof performance===b?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const t=(16*Math.random()+e)%16|0;return("x"==r?t:3&t|8).toString(16)})};const ke=(e,r)=>Object.assign(Object.assign({},g(e)?e:{value:e}),{[r]:Le()}),Ae=(e,r)=>(d(e)?e:[]).map(e=>ke(e,r));var Pe=(e,r)=>l(r)?[]:e.filter((e,t)=>(d(r)?r:[r]).indexOf(t)<0),Me=(e,r,t)=>d(e)?e.splice(t,0,e.splice(r,1)[0]):[],De=(e,r,t)=>d(e)&&([e[r],e[t]]=[e[t],e[r]]),We=(e,r)=>[...d(r)?r:[r||null],...e],$e=(e,r,t)=>[...e.slice(0,r),...d(t)?t:[t||null],...e.slice(r)],Te=e=>d(e)?Array(e.length).fill(null):void 0;const{useEffect:Ue,useRef:Ie,useState:ze}=e,He=({control:e,name:r,keyName:t="id"})=>{const n=Fe(),{resetFieldArrayFunctionRef:s,fieldArrayNamesRef:c,fieldsRef:u,getValues:i,defaultValuesRef:a,removeFieldEventListener:o,errorsRef:f,isDirtyRef:m,touchedFieldsRef:g,readFormStateRef:h,watchFieldArrayRef:v,validFieldsRef:b,fieldsWithValidationRef:p,validateSchemaIsValid:O}=e||n.control,y=Ie(A(a.current,r,[])),[j,w]=ze(Ae(y.current,t)),S=e=>e.map(e=>ke(e,t)),x=e=>{v.current[r]=e,w(e),h.current.isValid&&O&&O({[r]:e})},E=e=>{h.current.dirty&&(m.current=!!l(e)||he(e,y.current));for(const e in u.current)ve(e,r)&&u.current[e]&&o(u.current[e],!0)},R=()=>{const e=i({nest:!0})[r];if(d(e))for(let r=0;r<e.length;r++)j[r]=Object.assign(Object.assign({},j[r]),e[r])},V=()=>{E(),y.current=A(a.current,r,[]),w(Ae(y.current,t))};return Ue(()=>{const e=s.current,t=c.current;return t.add(r),e[r]=V,v.current[r]={},()=>{E(),delete e[r],t.delete(r)}},[]),{swap:(e,t)=>{R();const n=ge(u.current,r);De(n,e,t),E(n),De(j,e,t),x([...j]),f.current[r]&&De(f.current[r],e,t),h.current.touched&&g.current[r]&&De(g.current[r],e,t)},move:(e,t)=>{R();const n=ge(u.current,r);Me(n,e,t),E(n),Me(j,e,t),x([...j]),f.current[r]&&Me(f.current[r],e,t),h.current.touched&&g.current[r]&&Me(g.current[r],e,t)},prepend:e=>{R(),E(),x(We(j,d(e)?S(e):[ke(e,t)])),f.current[r]&&(f.current[r]=We(f.current[r],Te(e))),h.current.touched&&g.current[r]&&(g.current[r]=We(g.current[r],Te(e)))},append:e=>{R(),h.current.dirty&&(m.current=!0),x([...j,...d(e)?S(e):[ke(e,t)]])},remove:e=>{l(e)||R(),E(Pe(ge(u.current,r),e)),x(Pe(j,e)),f.current[r]&&(f.current[r]=Pe(f.current[r],e)),h.current.touched&&g.current[r]&&(g.current[r]=Pe(g.current[r],e)),h.current.isValid&&!O&&j.forEach((t,n)=>{if(l(e)||n===e||d(e)&&e.indexOf(n)>=0)for(const n in t){const t=`${r}[${e}].${n}`;b.current.delete(t),p.current.delete(t)}})},insert:(e,n)=>{R(),E($e(ge(u.current,r),e)),x($e(j,e,d(n)?S(n):[ke(n,t)])),f.current[r]&&(f.current[r]=$e(f.current[r],e,Te(n))),h.current.touched&&g.current[r]&&(g.current[r]=$e(g.current[r],e,Te(n)))},fields:j}};const Ge=e=>{var{name:r,rules:t,as:o,onBlur:d,onChange:m,onChangeName:g=v.onChange,onBlurName:h=v.onBlur,valueName:b,defaultValue:p,control:O}=e,y=Be(e,["name","rules","as","onBlur","onChange","onChangeName","onBlurName","valueName","defaultValue","control"]);const j=Fe(),{defaultValuesRef:w,setValue:S,register:x,unregister:E,errorsRef:R,removeFieldEventListener:V,triggerValidation:B,mode:{isOnSubmit:N,isOnBlur:F},reValidateMode:{isReValidateOnBlur:C,isReValidateOnSubmit:L},formState:{isSubmitted:k},fieldsRef:P,fieldArrayNamesRef:M}=O||j.control,[D,W]=s(l(p)?A(w.current,r):p),$=c(D),T=ne(D),U=()=>!me({hasError:!!A(R.current,r),isOnBlur:F,isOnSubmit:N,isReValidateOnBlur:C,isReValidateOnSubmit:L,isSubmitted:k}),I=e=>{const r=((e,r)=>f(e)?e:r?l(e.checked)?e:e.checked:l(e.value)?e:e.value)(e,T);return W(r),$.current=r,r},z=()=>{be(M.current,r)&&P.current[r]&&V(P.current[r],!0),x(Object.defineProperty({name:r},"value",{set(e){W(e),$.current=e},get:()=>$.current}),Object.assign({},t))};P.current[r]||(z(),W(l(p)?A(w.current,r):p)),u(()=>(z(),()=>{be(M.current,r)||E(r)}),[r]);const H=F||C,G=Object.assign(Object.assign(Object.assign(Object.assign({name:r},y),m?{[g]:(e=>(...t)=>S(r,I(e(t)),U()))(m)}:{[g]:e=>{const t=I(e&&e.target?e.target:e);S(r,t,U())}}),d||H?{[h]:(...e)=>{d&&d(e),H&&B(r)}}:{}),{[b||(T?"checked":"value")]:D});return i(o)?a(o,G):n(o,Object.assign({},G))},qe=e=>{var{as:r,errors:t,name:s,message:c,children:u}=e,l=Be(e,["as","errors","name","message","children"]);const f=Fe(),d=A(t||f.errors,s);if(!d)return null;const{message:m,types:g}=d,h=Object.assign(Object.assign({},r?l:{}),{children:u?u({message:m||c,messages:g}):m||c});return r?i(r)?a(r,h):n(r,h):n(o,Object.assign({},h))};export{Ge as Controller,qe as ErrorMessage,Ce as FormContext,He as useFieldArray,Ve as useForm,Fe as useFormContext};
